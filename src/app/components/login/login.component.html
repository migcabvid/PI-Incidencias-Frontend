<!-- src/app/components/login/login.component.html -->
<div class="login" (click)="closeOptions($event)">

  <form class="container" (ngSubmit)="onSubmit()" #loginForm="ngForm">
    <h1 class="login__title">Login</h1>

    <div class="login__content">
      <!-- Usuario -->
      <div class="login__box">
        <i class="ri-user-3-line login__icon"></i>
        <div class="login__box-input">
          <input
            type="text"
            required
            class="login__input"
            id="login-user"
            name="username"
            [(ngModel)]="usuario"
            placeholder=" "
          />
          <label for="login-user" class="login__label">Usuario</label>
        </div>
      </div>

      <!-- Contraseña -->
      <div class="login__box">
        <i class="ri-lock-2-line login__icon"></i>
        <div class="login__box-input">
          <input
            #loginPass
            type="password"
            required
            class="login__input"
            id="login-pass"
            name="password"
            [(ngModel)]="password"
            placeholder=" "
          />
          <label for="login-pass" class="login__label">Contraseña</label>
          <i
            #toggleEye
            class="ri-eye-off-line login__eye"
            (click)="togglePasswordVisibility()"
          ></i>
        </div>
      </div>

      <!-- Rol (custom select con transición) -->
      <div class="login__box login__box--custom-select">
        <i class="ri-user-settings-line login__icon"></i>
        <div
          class="login__box-input custom-select"
          [class.open]="optionsVisible"
        >
          <div class="selected-option" (click)="toggleOptions($event)">
            {{ selectedRoleLabel }}
            <!-- Icono de Remix Icon: ri-arrow-down-s-line -->
            <i class="ri-arrow-right-s-line icon-toggle"></i>
          </div>
          <div class="options">
            <div
              class="option"
              *ngFor="let role of availableRoles"
              (click)="selectOption(role)"
            >
              {{ role.label }}
            </div>
          </div>
        </div>
        <!-- Input oculto para enviar el valor real -->
        <input
          type="hidden"
          name="rol"
          [(ngModel)]="selectedRoleValue"
        />
      </div>
    </div>

    <button
      type="submit"
      class="login__button"
      [disabled]="loginForm.invalid"
    >
      Login
    </button>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
  </form>
</div>
